---
# X-Road Security Server Admin UI LoadBalancer Service
# Exposes port 4000 (admin UI) via MetalLB
# IMPORTANT: Gateway does NOT forward this port - VPN access only
apiVersion: v1
kind: Service
metadata:
  name: xroad-ss-admin-ui-lb
  namespace: xroad-im
  labels:
    app.kubernetes.io/name: xroad-security-server
    app.kubernetes.io/component: security-server
    app.kubernetes.io/part-of: x-road-information-mediator
    govstack.im/port-type: admin-ui
  annotations:
    metallb.io/loadBalancerIPs: 10.0.0.100
    metallb.io/allow-shared-ip: "shared-vip"
    govstack.im/port-description: "X-Road Security Server admin UI (VPN access only)"
    govstack.im/external-port: "4000"
    govstack.im/security-note: "Not forwarded by gateway - VPN users only"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Cluster
  ports:
    - name: admin-ui
      protocol: TCP
      port: 40001  # External port (consistent with BB-IM)
      targetPort: 4000  # Internal container port
  selector:
    app: mss-0
